{% extends "base.html" %}
{% block content %}
  <h1>üìù –î–µ—Ç–∞–ª—ñ –∑–∞–≤–¥–∞–Ω–Ω—è</h1>

  <h2>{{ task.name }}</h2>
  <p><strong>–û–ø–∏—Å:</strong> {{ task.description|default:"(–Ω–µ–º–∞—î –æ–ø–∏—Å—É)" }}</p>

  <p>
    <strong>–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç:</strong>
    {{ task.get_priority_display }}
    {% if task.priority == 'R' %}<span style="color:#d32f2f">‚óè</span>{% endif %}
    {% if task.priority == 'O' %}<span style="color:#f57c00">‚óè</span>{% endif %}
    {% if task.priority == 'Y' %}<span style="color:#fbc02d">‚óè</span>{% endif %}
    {% if task.priority == 'G' %}<span style="color:#388e3c">‚óè</span>{% endif %}
    {% if task.priority == 'B' %}<span style="color:#1976d2">‚óè</span>{% endif %}
  </p>

  <p>
    <strong>–î–µ–¥–ª–∞–π–Ω:</strong>
    {% if task.deadline %}
      {{ task.deadline|date:"d.m.Y H:i" }}
      {% if task.is_expired and task.status != 'done' %}
        <span style="color:#d32f2f">‚Äî –ø—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–æ ‚è∞</span>
      {% endif %}
    {% else %}
      (–Ω–µ –∑–∞–¥–∞–Ω–æ)
    {% endif %}
  </p>

  <p><strong>–°—Ç–∞—Ç—É—Å:</strong>
    {% if task.status == 'done' %}
      <span style="color: green;">{{ task.get_status_display }} ‚úÖ</span>
    {% elif task.status == 'in_progress' %}
      <span style="color: orange;">{{ task.get_status_display }} ‚è≥</span>
    {% elif task.status == 'to_do' %}
      <span style="color: #607d8b;">{{ task.get_status_display }} üóíÔ∏è</span>
    {% elif task.status == 'on_hold' %}
      <span style="color: #7b1fa2;">{{ task.get_status_display }} ‚è∏Ô∏è</span>
    {% elif task.status == 'canceled' %}
      <span style="color: #b71c1c;">{{ task.get_status_display }} ‚ùå</span>
    {% elif task.status == 'expired' %}
      <span style="color: #b71c1c;">{{ task.get_status_display }} ‚è∞</span>
    {% else %}
      {{ task.get_status_display }}
    {% endif %}
  </p>

  <hr>

  <h3>–ö–æ–º–µ–Ω—Ç–∞—Ä—ñ</h3>
  <ul>
    {% for comment in task.comments.all %}
      <li style="margin-bottom: 0.75rem;">
        <div>
          <strong>{{ comment.author|default:"–ê–Ω–æ–Ω—ñ–º" }}</strong>
          <small style="color:#666;">‚Äî {{ comment.created_at|date:"d.m.Y H:i" }}</small>
        </div>
        <div>{{ comment.content|linebreaksbr }}</div>
      </li>
    {% empty %}
      <li>(–ö–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤ –ø–æ–∫–∏ –Ω–µ–º–∞—î)</li>
    {% endfor %}
  </ul>

  <p><a href="{% url 'core:task_list' %}">‚Üê –ù–∞–∑–∞–¥ –¥–æ —Å–ø–∏—Å–∫—É</a></p>
{% endblock %}